/*
 * sysMonDash
 *
 * @author     nuxsmin
 * @link       https://github.com/nuxsmin/sysMonDash
 * @copyright  2012-2018 Rubén Domínguez nuxsmin@cygnux.org
 *
 * This file is part of sysMonDash.
 *
 * sysMonDash is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * sysMonDash is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with sysMonDash. If not, see <http://www.gnu.org/licenses/gpl-3.0-standalone.html>.
 */

/* ============================================================
   CSS Custom Properties — Dark theme (default)
   ============================================================ */
:root {
    --bg: #0f1117;
    --surface: #1a1f2e;
    --text: #e2e8f0;
    --text-muted: #94a3b8;
    --header-bg: #161b2e;
    --accent: #3b82f6;
    --thead-bg: #1e2535;
    --row-sep: rgba(255, 255, 255, 0.06);
    --border: rgba(255, 255, 255, 0.1);
    --footer-bg: #0f1117;
    --nomessages-bg: #1a1f2e;
    --nomessages-color: #4ade80;
    --error-bg: #2d0a0a;
    --error-border: #dc2626;
    --error-color: #fca5a5;
    --toggle-bg: rgba(255, 255, 255, 0.1);
    --toggle-hover: rgba(255, 255, 255, 0.2);
}

/* OS preference: light */
@media (prefers-color-scheme: light) {
    :root {
        --bg: #f8fafc;
        --surface: #ffffff;
        --text: #1e293b;
        --text-muted: #64748b;
        --header-bg: #ffffff;
        --accent: #6366f1;
        --thead-bg: #e2e8f0;
        --row-sep: rgba(0, 0, 0, 0.06);
        --border: rgba(0, 0, 0, 0.1);
        --footer-bg: #f8fafc;
        --nomessages-bg: #f0fdf4;
        --nomessages-color: #15803d;
        --error-bg: #fef2f2;
        --error-border: #dc2626;
        --error-color: #dc2626;
        --toggle-bg: rgba(0, 0, 0, 0.07);
        --toggle-hover: rgba(0, 0, 0, 0.15);
    }
}

/* Explicit dark theme (via JS / localStorage) */
[data-theme="dark"] {
    --bg: #0f1117;
    --surface: #1a1f2e;
    --text: #e2e8f0;
    --text-muted: #94a3b8;
    --header-bg: #161b2e;
    --accent: #3b82f6;
    --thead-bg: #1e2535;
    --row-sep: rgba(255, 255, 255, 0.06);
    --border: rgba(255, 255, 255, 0.1);
    --footer-bg: #0f1117;
    --nomessages-bg: #1a1f2e;
    --nomessages-color: #4ade80;
    --error-bg: #2d0a0a;
    --error-border: #dc2626;
    --error-color: #fca5a5;
    --toggle-bg: rgba(255, 255, 255, 0.1);
    --toggle-hover: rgba(255, 255, 255, 0.2);
}

/* Explicit light theme (via JS / localStorage) */
[data-theme="light"] {
    --bg: #f8fafc;
    --surface: #ffffff;
    --text: #1e293b;
    --text-muted: #64748b;
    --header-bg: #ffffff;
    --accent: #6366f1;
    --thead-bg: #e2e8f0;
    --row-sep: rgba(0, 0, 0, 0.06);
    --border: rgba(0, 0, 0, 0.1);
    --footer-bg: #f8fafc;
    --nomessages-bg: #f0fdf4;
    --nomessages-color: #15803d;
    --error-bg: #fef2f2;
    --error-border: #dc2626;
    --error-color: #dc2626;
    --toggle-bg: rgba(0, 0, 0, 0.07);
    --toggle-hover: rgba(0, 0, 0, 0.15);
}

/* ============================================================
   Reset & Base
   ============================================================ */
* {
    margin: 0;
    padding: 0;
    font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
}

body {
    line-height: 1.3em;
    font-size: 1.1em;
    overflow-x: hidden;
    background-color: var(--bg);
    color: var(--text);
    transition: background-color 0.25s ease, color 0.25s ease;
}

/* ============================================================
   Table — global base
   ============================================================ */
table {
    border-collapse: collapse;
    width: 100%;
}

/* ============================================================
   Monitor data container
   ============================================================ */
#monitor-data {
    padding: 1.5em 2em;
}

/* ============================================================
   Main alert table — card redesign
   ============================================================ */
#tblBoard {
    border-collapse: separate;
    border-spacing: 0;
    width: 100% !important;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.3);
    margin: 0 auto 0;
}

/* ============================================================
   Table header (thead.head)
   ============================================================ */
thead.head {
    position: sticky;
    top: 0;
    z-index: 5;
    background: var(--thead-bg);
    backdrop-filter: blur(12px);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-size: 0.7em;
}

thead.head th,
.head th {
    padding: .6em 1.2em;
    font-weight: 700;
    color: var(--text-muted);
    border-bottom: 2px solid var(--border);
    text-align: center;
}

/* ============================================================
   Status rows — cells
   ============================================================ */
tr.item-data > td {
    padding: .55em 1.2em;
    border-bottom: 1px solid rgba(0, 0, 0, 0.15);
    vertical-align: middle;
}

/* First cell — badge style */
tr.item-data td:first-child {
    font-size: 0.7em;
    font-weight: 800;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    white-space: nowrap;
    text-align: center;
    min-width: 5em;
    border-right: 1px solid rgba(255, 255, 255, 0.15);
}

/* ============================================================
   Status colors — gradients
   ============================================================ */
tr.item-data.critical  { background: linear-gradient(90deg, #c81c1c, #dc2626); }
tr.item-data.warning   { background: linear-gradient(90deg, #b45309, #d97706); }
tr.item-data.high      { background: linear-gradient(90deg, #991b1b, #b91c1c); }
tr.item-data.average   { background: linear-gradient(90deg, #c2410c, #ea580c); }
tr.item-data.unknown   { background: linear-gradient(90deg, #5b21b6, #7c3aed); }
tr.item-data.information { background: linear-gradient(90deg, #3730a3, #4338ca); }
tr.item-data.downtime  { background: linear-gradient(90deg, #1d4ed8, #2563eb); }
tr.item-data.acknowledged { background: linear-gradient(90deg, #374151, #475569); }
tr.item-data.up, tr.item-data.new-up { background: linear-gradient(90deg, #047857, #059669); }
tr.item-data.flapping  {
    background: repeating-linear-gradient(
        45deg,
        #a16207,
        #a16207 4px,
        #ca8a04 4px,
        #ca8a04 8px
    );
}

/* Hover — brightness lift */
tr.item-data:hover { filter: brightness(1.12); cursor: default; }

/* Light mode — rows slightly brighter/desaturated so theme change is visible */
[data-theme="light"] tr.item-data         { filter: brightness(1.08) saturate(0.92); }
[data-theme="light"] tr.item-data:hover   { filter: brightness(1.18) saturate(0.92); }

/* Text color for all status rows */
tr.item-data td,
tr.item-data a {
    color: #fff;
    font-size: 1em;
    font-weight: bold;
}

/* ============================================================
   .new — pulse animation (new events)
   ============================================================ */
@keyframes smd-pulse {
    0%, 100% { opacity: 1; }
    50%       { opacity: 0.78; }
}

tr.item-data.new {
    background: linear-gradient(90deg, #b45309, #fbbf24);
    animation: smd-pulse 1.8s ease-in-out infinite;
}

tr.item-data.new td {
    color: #1a1100;
}

tr.item-data.new a {
    color: #1a1100;
}

tr.item-data.new > td:first-child {
    background: rgba(0, 0, 0, 0.18);
}

/* .flapping text */
tr.item-data.flapping td,
tr.item-data.flapping a {
    color: #1a1100;
}

/* ============================================================
   Misc content
   ============================================================ */
.statusinfo {
    font-size: .78em !important;
    font-weight: 400;
    opacity: 0.88;
    max-width: 36vw;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.a-nodecorate {
    text-decoration: none;
}

/* ============================================================
   #total info bar — status bar under the table
   ============================================================ */
#total {
    font-size: .72em;
    color: var(--text-muted);
    text-align: right;
    padding: .5em 1.2em;
    background: var(--surface);
    border: 1px solid var(--border);
    border-top: none;
    border-radius: 0 0 10px 10px;
    margin: 0 auto 1.5em;
    width: 100%;
    box-sizing: border-box;
}

#total a {
    color: var(--text-muted);
}

/* ============================================================
   Loading / refreshing
   ============================================================ */
#loading {
    background: transparent url(../imgs/throbber.gif) no-repeat center center;
    width: 214px;
    height: 13px;
    display: inline-block;
}

#refreshing {
    color: var(--text-muted);
}

#refreshing_countdown {
    display: inline-block;
    width: 15px;
    text-align: center;
}

#refreshing, #loading {
    line-height: 50px;
    font-size: 1em;
}

#icinga_header {
    border: none;
    overflow: hidden;
    height: 80px;
    width: 100%;
}

/* ============================================================
   Footer
   ============================================================ */
footer {
    text-align: right;
    color: var(--text-muted);
    font-size: .8em;
    margin-bottom: 2em;
    border-top: 1px solid var(--border);
    padding: .5em 0;
    background: var(--footer-bg);
}

footer a, footer a:visited {
    color: var(--text-muted);
}

footer #project {
    margin-right: 2em;
}

footer #project a {
    vertical-align: baseline;
}

/* ============================================================
   Action links
   ============================================================ */
.action-link, .action-link img {
    font-size: 10px;
    vertical-align: middle;
    padding: 0;
}

.action-link img {
    margin: 0 1em;
    width: 20px;
    height: 20px;
}

/* ============================================================
   Header (#logo)
   ============================================================ */
#logo {
    padding: 1em;
    text-align: left;
    background-color: var(--header-bg);
    border-bottom: 2px solid var(--accent);
    position: relative;
    transition: background-color 0.25s ease;
}

#logo img {
    border: 0;
    max-height: 48px;
}

/* ── Logo dinámico: dark = logo-15 (claro), light = logo-16 (oscuro) ── */
#logo-light { display: none; }

[data-theme="light"] #logo-dark  { display: none; }
[data-theme="light"] #logo-light { display: inline; }

/* ── Light header overrides ── */
[data-theme="light"] #logo {
    background-color: #ffffff;
    border-bottom: 2px solid var(--accent);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

[data-theme="light"] #hora,
[data-theme="light"] #hora h1 {
    color: var(--text);
}

[data-theme="light"] #titulo,
[data-theme="light"] #titulo h1,
[data-theme="light"] #titulo h2 {
    color: var(--text);
}

[data-theme="light"] #theme-toggle {
    border-color: rgba(0, 0, 0, 0.2);
    color: var(--text);
}

/* ============================================================
   #hora  &  #titulo
   ============================================================ */
#hora {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    margin: 0 auto;
    text-align: center;
    color: #fff;
    font-size: 1.3em;
    line-height: 1.5em;
    display: inline-block;
    pointer-events: none;
}

#hora h1 {
    font-size: 1.2em;
}

#titulo {
    position: absolute;
    top: 0;
    right: 4em;
    text-align: right;
    color: #fff;
}

#titulo h1, #titulo h2 {
    font-size: 1.2em;
}

/* ============================================================
   Theme toggle button
   ============================================================ */
#theme-toggle {
    position: absolute;
    top: 50%;
    right: 1em;
    transform: translateY(-50%);
    background: var(--toggle-bg);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #fff;
    border-radius: 50%;
    width: 38px;
    height: 38px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 1.1em;
    transition: background 0.2s ease;
    z-index: 10;
    line-height: 1;
}

#theme-toggle:hover {
    background: var(--toggle-hover);
}

/* ============================================================
   No messages / errors
   ============================================================ */
#nomessages {
    width: 30%;
    margin: 1em auto;
    color: var(--nomessages-color);
    text-align: center;
    background-color: var(--nomessages-bg);
    padding: 1em;
    border-radius: 5px;
}

#nomessages.full {
    width: 90%;
    padding: .5em;
}

#nomessages.error {
    border-top: 1px solid var(--error-border);
    border-bottom: 1px solid var(--error-border);
    color: var(--error-color);
    background-color: var(--error-bg);
    border-radius: 0;
}

/* ============================================================
   NagVis view
   ============================================================ */
div#nagvis-view {
    margin: 0 auto;
    width: 1280px;
    height: 500px;
    border: 1px solid var(--border);
    border-radius: 5px;
    background-color: var(--surface);
    overflow: hidden;
    margin-bottom: 2em;
}

div#nagvis-view > iframe {
    width: 100%;
    height: 100%;
    border: none;
    overflow: hidden;
}

/* ============================================================
   Downtime table
   ============================================================ */
#tblDowntime {
    margin-top: 1em;
    font-size: 14px;
}

#tblDowntime thead.head {
    background-color: var(--thead-bg);
    color: var(--text-muted);
    text-align: center;
}

#tblDowntime tbody tr {
    color: #fff;
    background-color: #2563eb;
    text-align: center;
}

/* ============================================================
   Title dividers
   ============================================================ */
div.title {
    width: 100%;
    margin: 0 auto;
    color: var(--text-muted);
    text-align: center;
    border-top: 1px solid var(--border);
    padding: .5em 0;
}

.center {
    text-align: center;
}

/* ============================================================
   Updates indicator
   ============================================================ */
footer #updates {
    display: inline-block;
    margin-right: .5em;
}

footer #updates i {
    color: #26a69a;
    font-size: 1.5em;
}

/* ============================================================
   Backend image
   ============================================================ */
.backend-image {
    background-color: var(--surface);
}

.backend-image img {
    width: 48px;
}
